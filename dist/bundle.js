(()=>{var t={2:(t,e,o)=>{var n=o(2199),i=o(4664),s=o(5950);t.exports=function(t){return n(t,s,i)}},79:(t,e,o)=>{var n=o(3702),i=o(80),s=o(4739),r=o(8655),a=o(1175);function l(t){var e=-1,o=null==t?0:t.length;for(this.clear();++e<o;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=r,l.prototype.set=a,t.exports=l},80:(t,e,o)=>{var n=o(6025),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,o=n(e,t);return!(o<0||(o==e.length-1?e.pop():i.call(e,o,1),--this.size,0))}},181:t=>{t.exports=function(t){var e=[];if(null!=t)for(var o in Object(t))e.push(o);return e}},283:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ButtonState=void 0,e.ButtonState=class{constructor(){this.down=!1,this.pressed=!1}}},289:(t,e,o)=>{var n=o(2651);t.exports=function(t){return n(this,t).get(t)}},294:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},346:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},361:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,o){var n=typeof t;return!!(o=null==o?9007199254740991:o)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<o}},392:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},636:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GoToSubMenuCommand=void 0,e.GoToSubMenuCommand=class{constructor(t){this._game=t}execute(t){this._game.goToSubMenu(t)}}},659:(t,e,o)=>{var n=o(1873),i=Object.prototype,s=i.hasOwnProperty,r=i.toString,a=n?n.toStringTag:void 0;t.exports=function(t){var e=s.call(t,a),o=t[a];try{t[a]=void 0;var n=!0}catch(t){}var i=r.call(t);return n&&(e?t[a]=o:delete t[a]),i}},695:(t,e,o)=>{var n=o(8096),i=o(2428),s=o(6449),r=o(3656),a=o(361),l=o(7167),u=Object.prototype.hasOwnProperty;t.exports=function(t,e){var o=s(t),c=!o&&i(t),h=!o&&!c&&r(t),p=!o&&!c&&!h&&l(t),d=o||c||h||p,_=d?n(t.length,String):[],v=_.length;for(var y in t)!e&&!u.call(t,y)||d&&("length"==y||h&&("offset"==y||"parent"==y)||p&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||a(y,v))||_.push(y);return _}},799:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GoToPreviousMenuCommand=void 0,e.GoToPreviousMenuCommand=class{constructor(t){this._game=t}execute(){this._game.goToPreviousMenu()}}},938:t=>{t.exports=function(t){var e=this.__data__,o=e.delete(t);return this.size=e.size,o}},945:(t,e,o)=>{var n=o(79),i=o(8223),s=o(3661);t.exports=function(t,e){var o=this.__data__;if(o instanceof n){var r=o.__data__;if(!i||r.length<199)return r.push([t,e]),this.size=++o.size,this;o=this.__data__=new s(r)}return o.set(t,e),this.size=o.size,this}},1042:(t,e,o)=>{var n=o(6110)(Object,"create");t.exports=n},1123:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PVPCommand=void 0;const n=o(9210);e.PVPCommand=class{constructor(t){this._game=t}execute(){n.GameConfig.ai.on=!1,this._game.start()}}},1175:(t,e,o)=>{var n=o(6025);t.exports=function(t,e){var o=this.__data__,i=n(o,t);return i<0?(++this.size,o.push([t,e])):o[i][1]=e,this}},1420:(t,e,o)=>{var n=o(79);t.exports=function(){this.__data__=new n,this.size=0}},1549:(t,e,o)=>{var n=o(2032),i=o(3862),s=o(6721),r=o(2749),a=o(5749);function l(t){var e=-1,o=null==t?0:t.length;for(this.clear();++e<o;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=r,l.prototype.set=a,t.exports=l},1791:(t,e,o)=>{var n=o(6547),i=o(3360);t.exports=function(t,e,o,s){var r=!o;o||(o={});for(var a=-1,l=e.length;++a<l;){var u=e[a],c=s?s(o[u],t[u],u,o,t):void 0;void 0===c&&(c=t[u]),r?i(o,u,c):n(o,u,c)}return o}},1873:(t,e,o)=>{var n=o(9325).Symbol;t.exports=n},1882:(t,e,o)=>{var n=o(2552),i=o(3805);t.exports=function(t){if(!i(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1961:(t,e,o)=>{var n=o(9653);t.exports=function(t,e){var o=e?n(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.length)}},1998:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PVCCommand=void 0;const n=o(9210);e.PVCCommand=class{constructor(t){this._game=t}execute(t){n.GameConfig.ai.playerIndex=Math.floor(2*Math.random()),n.GameConfig.ai.on=!0,n.GameConfig.ai.trainIterations=t,this._game.start()}}},2032:(t,e,o)=>{var n=o(1042);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},2199:(t,e,o)=>{var n=o(4528),i=o(6449);t.exports=function(t,e,o){var s=e(t);return i(t)?s:n(s,o(t))}},2271:(t,e,o)=>{var n=o(1791),i=o(4664);t.exports=function(t,e){return n(t,i(t),e)}},2428:(t,e,o)=>{var n=o(7534),i=o(346),s=Object.prototype,r=s.hasOwnProperty,a=s.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(t){return i(t)&&r.call(t,"callee")&&!a.call(t,"callee")};t.exports=l},2550:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mapRange=void 0,e.mapRange=(t,e,o,n,i)=>{let s=(t-e)*(i-n)/(o-e)+n;return s=s<n?n:s,s=s>i?i:s,s}},2552:(t,e,o)=>{var n=o(1873),i=o(659),s=o(9350),r=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":r&&r in Object(t)?i(t):s(t)}},2651:(t,e,o)=>{var n=o(4218);t.exports=function(t,e){var o=t.__data__;return n(e)?o["string"==typeof e?"string":"hash"]:o.map}},2749:(t,e,o)=>{var n=o(1042),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:i.call(e,t)}},2804:(t,e,o)=>{var n=o(6110)(o(9325),"Promise");t.exports=n},2903:(t,e,o)=>{var n=o(3805),i=o(5527),s=o(181),r=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return s(t);var e=i(t),o=[];for(var a in t)("constructor"!=a||!e&&r.call(t,a))&&o.push(a);return o}},2949:(t,e,o)=>{var n=o(2651);t.exports=function(t,e){var o=n(this,t),i=o.size;return o.set(t,e),this.size+=o.size==i?0:1,this}},3007:t=>{t.exports=function(t,e){var o=-1,n=t.length;for(e||(e=Array(n));++o<n;)e[o]=t[o];return e}},3040:(t,e,o)=>{var n=o(1549),i=o(79),s=o(8223);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(s||i),string:new n}}},3201:t=>{var e=/\w*$/;t.exports=function(t){var o=new t.constructor(t.source,e.exec(t));return o.lastIndex=t.lastIndex,o}},3243:(t,e,o)=>{var n=o(6110),i=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},3290:(t,e,o)=>{t=o.nmd(t);var n=o(9325),i=e&&!e.nodeType&&e,s=i&&t&&!t.nodeType&&t,r=s&&s.exports===i?n.Buffer:void 0,a=r?r.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var o=t.length,n=a?a(o):new t.constructor(o);return t.copy(n),n}},3345:t=>{t.exports=function(){return[]}},3349:(t,e,o)=>{var n=o(2199),i=o(6375),s=o(7241);t.exports=function(t){return n(t,s,i)}},3360:(t,e,o)=>{var n=o(3243);t.exports=function(t,e,o){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:o,writable:!0}):t[e]=o}},3605:t=>{t.exports=function(t){return this.__data__.get(t)}},3650:(t,e,o)=>{var n=o(4335)(Object.keys,Object);t.exports=n},3656:(t,e,o)=>{t=o.nmd(t);var n=o(9325),i=o(9935),s=e&&!e.nodeType&&e,r=s&&t&&!t.nodeType&&t,a=r&&r.exports===s?n.Buffer:void 0,l=(a?a.isBuffer:void 0)||i;t.exports=l},3661:(t,e,o)=>{var n=o(3040),i=o(7670),s=o(289),r=o(4509),a=o(2949);function l(t){var e=-1,o=null==t?0:t.length;for(this.clear();++e<o;){var n=t[e];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=s,l.prototype.has=r,l.prototype.set=a,t.exports=l},3702:t=>{t.exports=function(){this.__data__=[],this.size=0}},3729:t=>{t.exports=function(t,e){for(var o=-1,n=null==t?0:t.length;++o<n&&!1!==e(t[o],o,t););return t}},3736:(t,e,o)=>{var n=o(1873),i=n?n.prototype:void 0,s=i?i.valueOf:void 0;t.exports=function(t){return s?Object(s.call(t)):{}}},3799:(t,e)=>{"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.MenuActionType=void 0,(o=e.MenuActionType||(e.MenuActionType={}))[o.CONTINUE=0]="CONTINUE",o[o.PVP=1]="PVP",o[o.PVC=2]="PVC",o[o.ToggleSound=3]="ToggleSound",o[o.GoToSubMenu=4]="GoToSubMenu",o[o.GoToPreviousMenu=5]="GoToPreviousMenu"},3805:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},3838:(t,e,o)=>{var n=o(1791),i=o(7241);t.exports=function(t,e){return t&&n(e,i(e),t)}},3862:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},3959:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Assets=void 0;const n=o(9210),i=n.GameConfig.sprites,s=n.GameConfig.sounds;e.Assets=new class{constructor(){this._sprites=new Map,this._sounds=new Map}loadSprite(t){const e=new Image;return this._sprites.set(t,e),new Promise((o=>{e.onload=()=>o(),e.src=i.basePath+t}))}async loadGameSprites(){const t=Object.values(i.paths).map(this.loadSprite.bind(this));await Promise.all(t)}loadSound(t){const e=new Audio(s.basePath+t);return this._sounds.set(t,e),e.load(),new Promise((t=>{e.onloadeddata=()=>t()}))}async loadGameSounds(){const t=Object.values(s.paths).map(this.loadSound.bind(this));await Promise.all(t)}async loadGameAssets(){await this.loadGameSounds(),await this.loadGameSprites()}getSprite(t){return this._sprites.get(t)}getSound(t){return this._sounds.get(t).cloneNode(!0)}playSound(t,e){if(n.GameConfig.soundOn){const o=this.getSound(t);o.volume=e,o.play()}}}},4218:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},4227:(t,e)=>{"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.Color=void 0,(o=e.Color||(e.Color={})).white="#BABABA",o.black="#2B2B2B",o.red="#B62A2F",o.yellow="#FECA34"},4335:t=>{t.exports=function(t,e){return function(o){return t(e(o))}}},4509:(t,e,o)=>{var n=o(2651);t.exports=function(t){return n(this,t).has(t)}},4528:t=>{t.exports=function(t,e){for(var o=-1,n=e.length,i=t.length;++o<n;)t[i+o]=e[o];return t}},4664:(t,e,o)=>{var n=o(9770),i=o(3345),s=Object.prototype.propertyIsEnumerable,r=Object.getOwnPropertySymbols,a=r?function(t){return null==t?[]:(t=Object(t),n(r(t),(function(e){return s.call(t,e)})))}:i;t.exports=a},4733:(t,e,o)=>{var n=o(1791),i=o(5950);t.exports=function(t,e){return t&&n(e,i(e),t)}},4739:(t,e,o)=>{var n=o(6025);t.exports=function(t){var e=this.__data__,o=n(e,t);return o<0?void 0:e[o][1]}},4823:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameWorld=void 0;const n=o(5077),i=o(2550),s=o(8578),r=o(5309),a=o(8938),l=o(4227),u=o(7374),c=o(9210),h=o(3959),p=o(9250),d=o(8049),_=o(5908),v=o(9819),y=c.GameConfig.physics,m=c.GameConfig.input,f=c.GameConfig.ball,g=c.GameConfig.table,b=c.GameConfig.labels,x=c.GameConfig.matchScore,w=c.GameConfig.ai,P=c.GameConfig.gameSize,B=c.GameConfig.sprites,C=c.GameConfig.sounds;e.GameWorld=class{get currentPlayer(){return this._players[this._currentPlayerIndex]}get nextPlayer(){return this._players[(this._currentPlayerIndex+1)%this._players.length]}get balls(){return this._balls}get isBallInHand(){return this._turnState.ballInHand}get isTurnValid(){return this._turnState.isValid}get isGameOver(){return this._referee.isGameOver(this.currentPlayer,this._cueBall,this._8Ball)}get isBallsMoving(){return this._balls.some((t=>t.moving))}get numOfPocketedBallsOnTurn(){return this._turnState.pocketedBalls.length}constructor(){this._players=[new r.Player,new r.Player],this._currentPlayerIndex=0,this.initMatch()}getBallsByColor(t){return this._balls.filter((e=>e.color===t))}handleInput(){n.AI.finishedSession&&_.Mouse.isPressed(m.mouseShootButton)&&this.shootCueBall(this._stick.power,this._stick.rotation)}isBallPosOutsideTopBorder(t){return t.y-f.diameter/2<=g.cushionWidth}isBallPosOutsideLeftBorder(t){return t.x-f.diameter/2<=g.cushionWidth}isBallPosOutsideRightBorder(t){return t.x+f.diameter/2>=P.x-g.cushionWidth}isBallPosOutsideBottomBorder(t){return t.y+f.diameter/2>=P.y-g.cushionWidth}handleCollisionWithTopCushion(t){t.position=t.position.addY(g.cushionWidth-t.position.y+f.diameter/2),t.velocity=new u.Vector2(t.velocity.x,-t.velocity.y)}handleCollisionWithLeftCushion(t){t.position=t.position.addX(g.cushionWidth-t.position.x+f.diameter/2),t.velocity=new u.Vector2(-t.velocity.x,t.velocity.y)}handleCollisionWithRightCushion(t){t.position=t.position.addX(P.x-g.cushionWidth-t.position.x-f.diameter/2),t.velocity=new u.Vector2(-t.velocity.x,t.velocity.y)}handleCollisionWithBottomCushion(t){t.position=t.position.addY(P.y-g.cushionWidth-t.position.y-f.diameter/2),t.velocity=new u.Vector2(t.velocity.x,-t.velocity.y)}resolveBallCollisionWithCushion(t){let e=!1;this.isBallPosOutsideTopBorder(t.nextPosition)&&(this.handleCollisionWithTopCushion(t),e=!0),this.isBallPosOutsideLeftBorder(t.nextPosition)&&(this.handleCollisionWithLeftCushion(t),e=!0),this.isBallPosOutsideRightBorder(t.nextPosition)&&(this.handleCollisionWithRightCushion(t),e=!0),this.isBallPosOutsideBottomBorder(t.nextPosition)&&(this.handleCollisionWithBottomCushion(t),e=!0),e&&(t.velocity=t.velocity.mult(1-y.collisionLoss))}resolveBallsCollision(t,e){if(!t.visible||!e.visible)return!1;const o=t.position.subtract(e.position),n=o.length;if(n>f.diameter)return!1;const i=o.mult((f.diameter-n)/n);t.position=t.position.add(i.mult(.5)),e.position=e.position.subtract(i.mult(.5));const s=o.mult(1/o.length),r=new u.Vector2(-s.y,s.x),a=s.dot(t.velocity),l=r.dot(t.velocity),c=s.dot(e.velocity),h=r.dot(e.velocity),p=s.mult(c),d=r.mult(l),_=s.mult(a),v=r.mult(h);return t.velocity=p.add(d),e.velocity=_.add(v),t.velocity=t.velocity.mult(1-y.collisionLoss),e.velocity=e.velocity.mult(1-y.collisionLoss),!0}handleCollisions(){for(let t=0;t<this._balls.length;t++){this.resolveBallCollisionWithCushion(this._balls[t]);for(let e=t+1;e<this._balls.length;e++){const o=this._balls[t],n=this._balls[e];if(this.resolveBallsCollision(o,n)){const t=o.velocity.length+n.velocity.length,e=(0,i.mapRange)(t,0,f.maxExpectedCollisionForce,0,1);if(h.Assets.playSound(C.paths.ballsCollide,e),!this._turnState.firstCollidedBallColor){const t=o.color===l.Color.white?n.color:o.color;this._turnState.firstCollidedBallColor=t}}}}}isInsidePocket(t){return g.pocketsPositions.some((e=>t.distFrom(new u.Vector2(e.x,e.y))<=g.pocketRadius))}resolveBallInPocket(t){this.isInsidePocket(t.position)&&t.hide()}isValidPlayerColor(t){return t===l.Color.red||t===l.Color.yellow}handleBallsInPockets(){this._balls.forEach((t=>{t.visible&&(this.resolveBallInPocket(t),t.visible||this._turnState.pocketedBalls.push(t))}))}handleBallInHand(){if(this._turnState.ballInHand&&_.Mouse.isPressed(m.mousePlaceBallButton)){const t=_.Mouse.position;this.isValidPosToPlaceCueBall(t)&&this.placeBallInHand(t)}}handleGameOver(){this.isGameOver&&(this._stick.hide(),this._turnState.isValid=!1)}nextTurn(){this._turnState=new v.State,this._stick.hide(),this.isTurnValid?this.currentPlayer.matchScore++:this._turnState.ballInHand=!0,this.isGameOver&&(8===this.currentPlayer.matchScore?this.currentPlayer.overallScore++:this.nextPlayer.overallScore++),this._currentPlayerIndex=(this._currentPlayerIndex+1)%this._players.length}drawCurrentPlayerLabel(){const t=b.currentPlayer;p.Canvas2D.drawText(t.text+(this._currentPlayerIndex+1),t.font,t.color,t.position,t.alignment)}drawMatchScores(){this._players.forEach(((t,e)=>{const o=new u.Vector2(x.scoresPositions[e].x,x.scoresPositions[e].y);p.Canvas2D.drawText(t.matchScore.toString(),"50px Impact","#FFD700",o)}))}drawOverallScores(){this._players.forEach(((t,e)=>{const o=b.overalScores[e];p.Canvas2D.drawText(t.overallScore.toString(),o.font,o.color,o.position,o.alignment)}))}isInsideTableBoundaries(t){return t.x>g.cushionWidth+f.diameter/2&&t.x<P.x-g.cushionWidth-f.diameter/2&&t.y>g.cushionWidth+f.diameter/2&&t.y<P.y-g.cushionWidth-f.diameter/2}isAITurn(){return w.on&&this._currentPlayerIndex===w.playerIndex}initMatch(){this._stick=new a.Stick(u.Vector2.zero),this._cueBall=new d.Ball(new u.Vector2(c.GameConfig.cueBallPosition.x,c.GameConfig.cueBallPosition.y),l.Color.white),this._8Ball=new d.Ball(new u.Vector2(c.GameConfig.eightBallPosition.x,c.GameConfig.eightBallPosition.y),l.Color.black),this._balls=[this._cueBall,this._8Ball,...c.GameConfig.redBallsPositions.map((t=>new d.Ball(new u.Vector2(t.x,t.y),l.Color.red))),...c.GameConfig.yellowBallsPositions.map((t=>new d.Ball(new u.Vector2(t.x,t.y),l.Color.yellow)))],this._players.forEach((t=>{t.matchScore=0,t.color=null})),this._currentPlayerIndex=0,this._turnState=new v.State,this._referee=new s.Referee}isValidPosToPlaceCueBall(t){return this.isInsideTableBoundaries(t)&&!this._balls.some((e=>e.visible&&e.position.distFrom(t)<f.diameter))}placeBallInHand(t){this._cueBall.show(t),this._turnState.ballInHand=!1}concludeTurn(){this.isBallsMoving||(this._turnState.isValid=this._referee.isValidTurn(this.currentPlayer,this._turnState),this.nextTurn())}shootCueBall(t,e){this.isBallInHand||(this._stick.shoot(),this._cueBall.shoot(t,e))}update(){this.isGameOver||(this.handleInput(),this.handleBallInHand(),this.handleCollisions(),this.handleBallsInPockets(),this.handleGameOver(),this._balls.forEach((t=>t.update())),this._stick.update(),this.isBallsMoving||this.isBallInHand||this.concludeTurn())}draw(){p.Canvas2D.drawImage(h.Assets.getSprite(B.paths.table)),this._balls.forEach((t=>t.draw())),this._stick.draw(),this.drawCurrentPlayerLabel(),this.drawMatchScores(),this.drawOverallScores()}}},4840:(t,e,o)=>{var n="object"==typeof o.g&&o.g&&o.g.Object===Object&&o.g;t.exports=n},4894:(t,e,o)=>{var n=o(1882),i=o(294);t.exports=function(t){return null!=t&&i(t.length)&&!n(t)}},4901:(t,e,o)=>{var n=o(2552),i=o(294),s=o(346),r={};r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1,t.exports=function(t){return s(t)&&i(t.length)&&!!r[n(t)]}},5024:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIPolicy=void 0;const n=o(9210);e.AIPolicy=class{constructor(){}evaluate(t){let e=1;for(let o=0;o<t.balls.length;o++)for(let i=o+1;i<t.balls.length;i++){let s=t.balls[o],r=t.balls[i];e+=s.position.distFrom(r.position)*n.GameConfig.ai.ballDistanceBonus}return t.isTurnValid?(e+=n.GameConfig.ai.validTurnBonus,e+=n.GameConfig.ai.pocketedBallBonus*t.numOfPocketedBallsOnTurn,t.isGameOver&&(e+=n.GameConfig.ai.gameWonBonus)):(e-=n.GameConfig.ai.invalidTurnPenalty,t.isGameOver&&(e-=n.GameConfig.ai.gameLossPenalty)),e}}},5077:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AI=e.AITrainer=void 0;const n=o(7374),i=o(9210),s=o(5743),r=o(5024),a=o(8055),l=o(5908),u=i.GameConfig.ai,c=i.GameConfig.stick;class h{get finishedSession(){return this._finishedSession}constructor(){this._iteration=0,this._finishedSession=!0,this._policy=new r.AIPolicy}placeBallInHand(t){let e=n.Vector2.copy(i.GameConfig.cueBallPosition);for(;!t.isValidPosToPlaceCueBall(e);)e.addToX(5);t.placeBallInHand(e)}init(){this._opponents=[],this._currentOpponent=this.createRandomOpponent(),this._bestOpponent=this._currentOpponent,this._iteration=0}createMutation(t){let e=t.power;e+=2*Math.random()*u.shotPowerMutationVariance-u.shotPowerMutationVariance,e=e<u.minShotPower?u.minShotPower:e,e=e>c.maxPower?c.maxPower:e;let o=t.rotation;return t.evaluation>0?o+=1/t.evaluation*(2*Math.random()*Math.PI-Math.PI):o=2*Math.random()*Math.PI-Math.PI,new s.AIOpponent(e,o)}createRandomOpponent(){const t=75*Math.random()+1,e=2*Math.random()*Math.PI;return new s.AIOpponent(t,e)}train(){if(this._iteration===u.trainIterations)return i.GameConfig.soundOn=this._soundOnState,this.playTurn(),void(this._finishedSession=!0);if(this._gameWorld.isBallsMoving)return;this._gameWorld.concludeTurn(),this._currentOpponent.evaluation=this._policy.evaluate(this._gameWorld);const t=new s.AIOpponent(this._currentOpponent.power,this._currentOpponent.rotation,this._currentOpponent.evaluation);this._opponents.push(t),t.evaluation>this._bestOpponent.evaluation&&(this._bestOpponent=t),this._gameWorld=a(this._initialGameWorld),this._currentOpponent=this.buildNewOpponent(),this._iteration++,this.simulate()}buildNewOpponent(){return this._iteration%10==0?this.createRandomOpponent():this.createMutation(this._bestOpponent)}playTurn(){this._initialGameWorld.shootCueBall(this._bestOpponent.power,this._bestOpponent.rotation)}simulate(){this._gameWorld.shootCueBall(this._currentOpponent.power,this._currentOpponent.rotation)}opponentTrainingLoop(){for(;!this._finishedSession;)this.train(),this._gameWorld.update();l.Mouse.reset()}startSession(t){this._soundOnState=i.GameConfig.soundOn,i.GameConfig.soundOn=!1,t.isBallInHand&&this.placeBallInHand(t),this._initialGameWorld=t,this._gameWorld=a(t),this.init(),this._finishedSession=!1,this.simulate(),this.opponentTrainingLoop()}}e.AITrainer=h,e.AI=new h},5083:(t,e,o)=>{var n=o(1882),i=o(7296),s=o(3805),r=o(7473),a=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,h=u.hasOwnProperty,p=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!s(t)||i(t))&&(n(t)?p:a).test(r(t))}},5288:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},5309:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Player=void 0,e.Player=class{constructor(){this.matchScore=0,this.overallScore=0}}},5481:(t,e,o)=>{var n=o(9325)["__core-js_shared__"];t.exports=n},5527:t=>{var e=Object.prototype;t.exports=function(t){var o=t&&t.constructor;return t===("function"==typeof o&&o.prototype||e)}},5529:(t,e,o)=>{var n=o(9344),i=o(8879),s=o(5527);t.exports=function(t){return"function"!=typeof t.constructor||s(t)?{}:n(i(t))}},5580:(t,e,o)=>{var n=o(6110)(o(9325),"DataView");t.exports=n},5743:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AIOpponent=void 0,e.AIOpponent=class{constructor(t=50,e=0,o=0){this.power=t,this.rotation=e,this.evaluation=o}}},5749:(t,e,o)=>{var n=o(1042);t.exports=function(t,e){var o=this.__data__;return this.size+=this.has(t)?0:1,o[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},5861:(t,e,o)=>{var n=o(5580),i=o(8223),s=o(2804),r=o(6545),a=o(8303),l=o(2552),u=o(7473),c="[object Map]",h="[object Promise]",p="[object Set]",d="[object WeakMap]",_="[object DataView]",v=u(n),y=u(i),m=u(s),f=u(r),g=u(a),b=l;(n&&b(new n(new ArrayBuffer(1)))!=_||i&&b(new i)!=c||s&&b(s.resolve())!=h||r&&b(new r)!=p||a&&b(new a)!=d)&&(b=function(t){var e=l(t),o="[object Object]"==e?t.constructor:void 0,n=o?u(o):"";if(n)switch(n){case v:return _;case y:return c;case m:return h;case f:return p;case g:return d}return e}),t.exports=b},5908:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mouse=void 0;const n=o(283),i=o(9250),s=o(7374);e.Mouse=new class{get position(){return s.Vector2.copy(this._position)}constructor(){this._buttonStates=[];for(let t=0;t<3;t++)this._buttonStates[t]=new n.ButtonState;this._position=s.Vector2.zero,document.addEventListener("mousemove",(t=>this.handleMouseMove(t))),document.addEventListener("mousedown",(t=>this.handleMouseDown(t))),document.addEventListener("mouseup",(t=>this.handleMouseUp(t)))}handleMouseMove(t){const e=(t.pageX-i.Canvas2D.offsetX)/i.Canvas2D.scaleX,o=(t.pageY-i.Canvas2D.offsetY)/i.Canvas2D.scaleY;this._position=new s.Vector2(e,o)}handleMouseDown(t){this._buttonStates[t.button].down=!0,this._buttonStates[t.button].pressed=!0}handleMouseUp(t){this._buttonStates[t.button].down=!1}reset(){for(let t=0;t<3;t++)this._buttonStates[t].pressed=!1}isDown(t){return this._buttonStates[t].down}isPressed(t){return this._buttonStates[t].pressed}}},5950:(t,e,o)=>{var n=o(695),i=o(8984),s=o(4894);t.exports=function(t){return s(t)?n(t):i(t)}},6009:(t,e,o)=>{t=o.nmd(t);var n=o(4840),i=e&&!e.nodeType&&e,s=i&&t&&!t.nodeType&&t,r=s&&s.exports===i&&n.process,a=function(){try{return s&&s.require&&s.require("util").types||r&&r.binding&&r.binding("util")}catch(t){}}();t.exports=a},6025:(t,e,o)=>{var n=o(5288);t.exports=function(t,e){for(var o=t.length;o--;)if(n(t[o][0],e))return o;return-1}},6038:(t,e,o)=>{var n=o(5861),i=o(346);t.exports=function(t){return i(t)&&"[object Set]"==n(t)}},6110:(t,e,o)=>{var n=o(5083),i=o(392);t.exports=function(t,e){var o=i(t,e);return n(o)?o:void 0}},6169:(t,e,o)=>{var n=o(9653);t.exports=function(t,e){var o=e?n(t.buffer):t.buffer;return new t.constructor(o,t.byteOffset,t.byteLength)}},6189:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var o=t.length,n=new t.constructor(o);return o&&"string"==typeof t[0]&&e.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},6375:(t,e,o)=>{var n=o(4528),i=o(8879),s=o(4664),r=o(3345),a=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)n(e,s(t)),t=i(t);return e}:r;t.exports=a},6449:t=>{var e=Array.isArray;t.exports=e},6490:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Keyboard=void 0;const n=o(283);e.Keyboard=new class{constructor(){this._keyStates=[];for(let t=0;t<256;t++)this._keyStates[t]=new n.ButtonState;document.addEventListener("keyup",(t=>this.handleKeyUp(t))),document.addEventListener("keydown",(t=>this.handleKeyDown(t)))}handleKeyUp(t){this._keyStates[t.keyCode].down=!1}handleKeyDown(t){this._keyStates[t.keyCode].pressed=!0,this._keyStates[t.keyCode].down=!0}reset(){for(let t=0;t<256;t++)this._keyStates[t].pressed=!1}isDown(t){return this._keyStates[t].down}isPressed(t){return this._keyStates[t].pressed}}},6545:(t,e,o)=>{var n=o(6110)(o(9325),"Set");t.exports=n},6547:(t,e,o)=>{var n=o(3360),i=o(5288),s=Object.prototype.hasOwnProperty;t.exports=function(t,e,o){var r=t[e];s.call(t,e)&&i(r,o)&&(void 0!==o||e in t)||n(t,e,o)}},6721:(t,e,o)=>{var n=o(1042),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var o=e[t];return"__lodash_hash_undefined__"===o?void 0:o}return i.call(e,t)?e[t]:void 0}},7167:(t,e,o)=>{var n=o(4901),i=o(7301),s=o(6009),r=s&&s.isTypedArray,a=r?i(r):n;t.exports=a},7199:(t,e,o)=>{var n=o(9653),i=o(6169),s=o(3201),r=o(3736),a=o(1961);t.exports=function(t,e,o){var l=t.constructor;switch(e){case"[object ArrayBuffer]":return n(t);case"[object Boolean]":case"[object Date]":return new l(+t);case"[object DataView]":return i(t,o);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return a(t,o);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(t);case"[object RegExp]":return s(t);case"[object Symbol]":return r(t)}}},7217:(t,e,o)=>{var n=o(79),i=o(1420),s=o(938),r=o(3605),a=o(9817),l=o(945);function u(t){var e=this.__data__=new n(t);this.size=e.size}u.prototype.clear=i,u.prototype.delete=s,u.prototype.get=r,u.prototype.has=a,u.prototype.set=l,t.exports=u},7241:(t,e,o)=>{var n=o(695),i=o(2903),s=o(4894);t.exports=function(t){return s(t)?n(t,!0):i(t)}},7296:(t,e,o)=>{var n,i=o(5481),s=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!s&&s in t}},7301:t=>{t.exports=function(t){return function(e){return t(e)}}},7374:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Vector2=void 0;class o{constructor(t,e){this._x=t,this._y=e}get x(){return this._x}get y(){return this._y}static get zero(){return new o(0,0)}get length(){return Math.sqrt(Math.pow(this._x,2)+Math.pow(this._y,2))}static copy(t){return new o(t.x,t.y)}addX(t){return new o(this._x,this._y).addToX(t)}addY(t){return new o(this._x,this._y).addToY(t)}addToX(t){return this._x+=t,this}addToY(t){return this._y+=t,this}addTo(t){return this.addToX(t.x).addToY(t.y)}add(t){return new o(this._x,this._y).addTo(t)}subtractTo(t){return this._x-=t.x,this._y-=t.y,this}subtract(t){return new o(this._x,this._y).subtractTo(t)}mult(t){return new o(this._x,this._y).multBy(t)}multBy(t){return this._x*=t,this._y*=t,this}dot(t){return this._x*t.x+this._y*t.y}distFrom(t){return this.subtract(t).length}}e.Vector2=o},7473:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},7534:(t,e,o)=>{var n=o(2552),i=o(346);t.exports=function(t){return i(t)&&"[object Arguments]"==n(t)}},7670:(t,e,o)=>{var n=o(2651);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},7687:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ToggleSoundCommand=void 0;const n=o(9210),i=n.GameConfig.sprites;e.ToggleSoundCommand=class{toggleMuteButtonSprite(){const t=i.paths.muteButton,e=i.paths.muteButtonHovered;i.paths.muteButton=i.paths.muteButtonPressed,i.paths.muteButtonHovered=i.paths.muteButtonPressedHovered,i.paths.muteButtonPressed=t,i.paths.muteButtonPressedHovered=e}execute(){n.GameConfig.soundOn=!n.GameConfig.soundOn,this.toggleMuteButtonSprite()}}},7730:(t,e,o)=>{var n=o(9172),i=o(7301),s=o(6009),r=s&&s.isMap,a=r?i(r):n;t.exports=a},7828:(t,e,o)=>{var n=o(9325).Uint8Array;t.exports=n},8049:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Ball=void 0;const n=o(9210),i=o(9250),s=o(4227),r=o(7374),a=o(3959),l=n.GameConfig.physics,u=n.GameConfig.sprites,c=n.GameConfig.ball;e.Ball=class{get position(){return r.Vector2.copy(this._position)}set position(t){this._position=t}get nextPosition(){return this.position.add(this._velocity.mult(1-l.friction))}get velocity(){return r.Vector2.copy(this._velocity)}set velocity(t){this._moving=t.length>0,this._velocity=t}get moving(){return this._moving}get color(){return this._color}get visible(){return this._visible}constructor(t,e){this._position=t,this._velocity=r.Vector2.zero,this._moving=!1,this._visible=!0,this._color=e,this.resolveSprite(e)}resolveSprite(t){switch(t){case s.Color.white:this._sprite=a.Assets.getSprite(u.paths.cueBall);break;case s.Color.black:this._sprite=a.Assets.getSprite(u.paths.blackBall);break;case s.Color.red:this._sprite=a.Assets.getSprite(u.paths.redBall);break;case s.Color.yellow:this._sprite=a.Assets.getSprite(u.paths.yellowBall)}}shoot(t,e){this._velocity=new r.Vector2(t*Math.cos(e),t*Math.sin(e)),this._moving=!0}show(t){this._position=t,this._velocity=r.Vector2.zero,this._visible=!0}hide(){this._velocity=r.Vector2.zero,this._moving=!1,this._visible=!1}update(){this._moving&&(this._velocity.multBy(1-l.friction),this._position.addTo(this._velocity),this._velocity.length<c.minVelocityLength&&(this.velocity=r.Vector2.zero,this._moving=!1))}draw(){this._visible&&i.Canvas2D.drawImage(this._sprite,this._position,0,c.origin)}}},8055:(t,e,o)=>{var n=o(9999);t.exports=function(t){return n(t,5)}},8096:t=>{t.exports=function(t,e){for(var o=-1,n=Array(t);++o<t;)n[o]=e(o);return n}},8223:(t,e,o)=>{var n=o(6110)(o(9325),"Map");t.exports=n},8303:(t,e,o)=>{var n=o(6110)(o(9325),"WeakMap");t.exports=n},8315:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Menu=void 0;const n=o(8880),i=o(3959),s=o(9250),r=o(9210),a=o(9340),l=r.GameConfig.cursor,u=r.GameConfig.sprites;class c{set active(t){this._active=t}get active(){return this._active}init(t,e){this._buttons=e.buttons.map((e=>new n.MenuButton(t.get(e.action),e.value,e.position,e.sprite,e.spriteOnHover))),this._labels=e.labels.map((t=>new a.MenuLabel(t.text,t.position,t.font,t.color,t.alignment))),this._subMenus=e.subMenus.map((e=>{const o=new c;return o.init(t,e),o}))}getSubMenu(t){return this._subMenus[t]}update(){this._active&&this._buttons.forEach((t=>t.update())),this._subMenus.forEach((t=>t.update()))}draw(){this._active&&(s.Canvas2D.changeCursor(l.default),s.Canvas2D.drawImage(i.Assets.getSprite(u.paths.menuBackground)),this._labels.forEach((t=>t.draw())),this._buttons.forEach((t=>t.draw()))),this._subMenus.forEach((t=>t.draw()))}}e.Menu=c},8440:(t,e,o)=>{var n=o(6038),i=o(7301),s=o(6009),r=s&&s.isSet,a=r?i(r):n;t.exports=a},8578:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Referee=void 0;const n=o(4227);e.Referee=class{isValidFirstTouch(t,e,o){return!!e&&(t.color?t.color===e||1===t.matchScore&&o&&e!==n.Color.black||7===t.matchScore&&e===n.Color.black||8===t.matchScore&&e===n.Color.black:e!==n.Color.black)}isValidPocketedBalls(t,e){if(0===e.length)return!0;if(t.color)return 8===t.matchScore?1===e.length&&e[0].color===n.Color.black:e.every((e=>e.color===t.color));{const t=e[0].color;return t!==n.Color.white&&t!==n.Color.black&&e.every((e=>e.color===t))}}isValidTurn(t,e){return this.isValidFirstTouch(t,e.firstCollidedBallColor,e.pocketedBalls.length>0)&&this.isValidPocketedBalls(t,e.pocketedBalls)}isGameOver(t,e,o){return!o.visible||!e.visible&&7===t.matchScore||!e.visible&&8===t.matchScore}}},8655:(t,e,o)=>{var n=o(6025);t.exports=function(t){return n(this.__data__,t)>-1}},8879:(t,e,o)=>{var n=o(4335)(Object.getPrototypeOf,Object);t.exports=n},8880:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MenuButton=void 0;const n=o(9210),i=o(5908),s=o(9250),r=o(3959),a=n.GameConfig.input,l=n.GameConfig.cursor,u=n.GameConfig.sprites;e.MenuButton=class{set hovered(t){this._hovered=t}constructor(t,e,o,n,i){this._command=t,this._value=e,this._position=o,this._spriteKey=n,this._spriteOnHoverKey=i,this._activeSprite=r.Assets.getSprite(u.paths[this._spriteKey])}isInsideButton(t){return t.x>this._position.x&&t.x<this._position.x+this._activeSprite.width&&t.y>this._position.y&&t.y<this._position.y+this._activeSprite.height}handleInput(){this.hovered=this.isInsideButton(i.Mouse.position),this._activeSprite=this._hovered?r.Assets.getSprite(u.paths[this._spriteOnHoverKey]):r.Assets.getSprite(u.paths[this._spriteKey]),this._hovered&&i.Mouse.isPressed(a.mouseSelectButton)&&(s.Canvas2D.changeCursor(l.default),this._command.execute(this._value))}update(){this.handleInput()}draw(){this._hovered&&s.Canvas2D.changeCursor(l.button),s.Canvas2D.drawImage(this._activeSprite,this._position)}}},8938:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stick=void 0;const n=o(6490),i=o(5908),s=o(9210),r=o(3959),a=o(9250),l=o(7374),u=o(2550),c=s.GameConfig.input,h=s.GameConfig.stick,p=s.GameConfig.sprites,d=s.GameConfig.sounds;e.Stick=class{get position(){return l.Vector2.copy(this._position)}get rotation(){return this._rotation}get power(){return this._power}set movable(t){this._movable=t}get visible(){return this._visible}set visible(t){this._visible=t}set rotation(t){this._rotation=t}constructor(t){this._position=t,this._sprite=r.Assets.getSprite(p.paths.stick),this._rotation=0,this._origin=l.Vector2.copy(h.origin),this._power=0,this._movable=!0,this._visible=!0}increasePower(){this._power+=h.powerToAddPerFrame,this._origin.addToX(h.movementPerFrame)}decreasePower(){this._power-=h.powerToAddPerFrame,this._origin.addToX(-h.movementPerFrame)}isLessThanMaxPower(){return this._power<h.maxPower}isMoreThanMinPower(){return this._power>=0}updatePower(){n.Keyboard.isDown(c.increaseShotPowerKey)&&this.isLessThanMaxPower()?this.increasePower():n.Keyboard.isDown(c.decreaseShotPowerKey)&&this.isMoreThanMinPower()&&this.decreasePower()}updateRotation(){const t=i.Mouse.position.y-this._position.y,e=i.Mouse.position.x-this._position.x;this._rotation=Math.atan2(t,e)}hide(){this._power=0,this._visible=!1,this._movable=!1}show(t){this._position=t,this._origin=l.Vector2.copy(h.origin),this._movable=!0,this._visible=!0}shoot(){this._origin=l.Vector2.copy(h.shotOrigin);const t=(0,u.mapRange)(this._power,0,h.maxPower,0,1);r.Assets.playSound(d.paths.strike,t)}update(){this._movable&&(this.updateRotation(),this.updatePower())}draw(){this._visible&&a.Canvas2D.drawImage(this._sprite,this._position,this._rotation,this._origin)}}},8948:(t,e,o)=>{var n=o(1791),i=o(6375);t.exports=function(t,e){return n(t,i(t),e)}},8984:(t,e,o)=>{var n=o(5527),i=o(3650),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return i(t);var e=[];for(var o in Object(t))s.call(t,o)&&"constructor"!=o&&e.push(o);return e}},9172:(t,e,o)=>{var n=o(5861),i=o(346);t.exports=function(t){return i(t)&&"[object Map]"==n(t)}},9210:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GameConfig=void 0;const n=o(3799);e.GameConfig={gameSize:{x:1500,y:825},soundOn:!0,timeoutToHideStickAfterShot:500,timeoutToHideBallAfterPocket:100,loadingScreenTimeout:5e3,loadingScreenImagePosition:{x:450,y:112.5},timeoutToLoadSubMenu:100,labels:{currentPlayer:{position:{x:640,y:260},color:"#FFD700",font:"70px Impact",alignment:"top",text:"PLAYER "},overalScores:[{position:{x:628,y:460},color:"#FFD700",font:"200px Impact",alignment:"top"},{position:{x:778,y:460},color:"#FFD700",font:"200px Impact",alignment:"top"}]},redBallsPositions:[{x:1056,y:433},{x:1090,y:374},{x:1126,y:393},{x:1126,y:472},{x:1162,y:335},{x:1162,y:374},{x:1162,y:452}],yellowBallsPositions:[{x:1022,y:413},{x:1056,y:393},{x:1090,y:452},{x:1126,y:354},{x:1126,y:433},{x:1162,y:413},{x:1162,y:491}],cueBallPosition:{x:413,y:413},eightBallPosition:{x:1090,y:413},matchScore:{scoresPositions:[{x:420,y:27},{x:932,y:27}],unitMargin:20},sprites:{basePath:"assets/sprites/",paths:{menuBackground:"main_menu_background.png",table:"spr_background4.png",cueBall:"spr_ball2.png",redBall:"spr_redBall2.png",yellowBall:"spr_yellowBall2.png",blackBall:"spr_blackBall2.png",stick:"spr_stick.png",twoPlayersButton:"2_players_button.png",twoPlayersButtonHovered:"2_players_button_hover.png",onePlayerButton:"1_player_button.png",onePlayerButtonHovered:"1_player_button_hover.png",muteButton:"mute_button.png",muteButtonHovered:"mute_button_hover.png",muteButtonPressed:"mute_button_pressed.png",muteButtonPressedHovered:"mute_button_pressed_hover.png",easyButton:"easy_button.png",easyButtonHovered:"easy_button_hover.png",mediumButton:"medium_button.png",mediumButtonHovered:"medium_button_hover.png",hardButton:"hard_button.png",hardButtonHovered:"hard_button_hover.png",backButton:"back_button.png",backButtonHovered:"back_button_hover.png",continueButton:"continue_button.png",continueButtonHovered:"continue_button_hover.png",insaneButton:"insane_button.png",insaneButtonHovered:"insane_button_hover.png",controls:"controls.png",redScore:"red_score.png",yellowScore:"yellow_score.png"}},sounds:{basePath:"assets/sounds/",paths:{ballsCollide:"BallsCollide.wav",strike:"Strike.wav",rail:"Hole.wav"}},physics:{friction:.018,collisionLoss:.018},table:{cushionWidth:57,pocketRadius:48,pocketsPositions:[{x:62,y:62},{x:750,y:32},{x:1435,y:62},{x:62,y:762},{x:750,y:794},{x:1435,y:762}]},ball:{diameter:38,origin:{x:25,y:25},minVelocityLength:.05,maxExpectedVelocity:120,maxExpectedCollisionForce:70},stick:{origin:{x:970,y:11},shotOrigin:{x:950,y:11},powerToAddPerFrame:1,movementPerFrame:3,maxPower:50},input:{mouseSelectButton:0,mouseShootButton:0,mousePlaceBallButton:0,increaseShotPowerKey:87,decreaseShotPowerKey:83,toggleMenuKey:27},mainMenu:{labels:[{text:"Classic 8-Ball",position:{x:200,y:100},font:"100px Bookman",color:"white",alignment:"left"},{text:`© ${(new Date).getFullYear()} Shaurya Mehta`,position:{x:1250,y:800},font:"20px Bookman",color:"white",alignment:"left"}],buttons:[{action:n.MenuActionType.PVP,position:{x:200,y:200},sprite:"twoPlayersButton",spriteOnHover:"twoPlayersButtonHovered"},{action:n.MenuActionType.GoToSubMenu,value:0,position:{x:200,y:400},sprite:"onePlayerButton",spriteOnHover:"onePlayerButtonHovered"},{action:n.MenuActionType.ToggleSound,position:{x:1430,y:10},sprite:"muteButton",spriteOnHover:"muteButtonHovered"}],subMenus:[{labels:[{text:"Choose Difficulty",position:{x:200,y:80},font:"70px Bookman",color:"white",alignment:"left"},{text:`© ${(new Date).getFullYear()} Shaurya Mehta`,position:{x:1250,y:800},font:"20px Bookman",color:"white",alignment:"left"}],buttons:[{action:n.MenuActionType.GoToPreviousMenu,position:{x:100,y:150},sprite:"backButton",spriteOnHover:"backButtonHovered"},{action:n.MenuActionType.PVC,position:{x:200,y:150},value:30,sprite:"easyButton",spriteOnHover:"easyButtonHovered"},{action:n.MenuActionType.PVC,position:{x:200,y:300},value:50,sprite:"mediumButton",spriteOnHover:"mediumButtonHovered"},{action:n.MenuActionType.PVC,position:{x:200,y:450},value:100,sprite:"hardButton",spriteOnHover:"hardButtonHovered"},{action:n.MenuActionType.PVC,position:{x:200,y:600},value:200,sprite:"insaneButton",spriteOnHover:"insaneButtonHovered"}],subMenus:[]}]},cursor:{default:"default",button:"pointer"},ai:{on:!0,trainIterations:1e3,playerIndex:1,ballDistanceBonus:10,validTurnBonus:50,pocketedBallBonus:100,invalidTurnPenalty:-50,gameWonBonus:500,gameLossPenalty:-200,shotPowerMutationVariance:.2,minShotPower:10}}},9250:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Canvas2D=void 0;const n=o(9210),i=o(7374),s=document.getElementById("screen"),r=document.getElementById("gameArea");e.Canvas2D=new class{get scaleX(){return this._scale.x}get scaleY(){return this._scale.y}get offsetX(){return this._offset.x}get offsetY(){return this._offset.y}constructor(t,e){this._canvasContainer=e,this._canvas=t,this._context=this._canvas.getContext("2d"),this.resizeCanvas()}resizeCanvas(){const t=n.GameConfig.gameSize.x,e=n.GameConfig.gameSize.y,o=t/e;let s=window.innerHeight,r=window.innerWidth;r/s>o?r=s*o:s=r/o,this._canvasContainer.style.width=r+"px",this._canvasContainer.style.height=s+"px",this._canvasContainer.style.marginTop=(window.innerHeight-s)/2+"px",this._canvasContainer.style.marginLeft=(window.innerWidth-r)/2+"px",this._canvasContainer.style.marginBottom=(window.innerHeight-s)/2+"px",this._canvasContainer.style.marginRight=(window.innerWidth-r)/2+"px",this._scale=new i.Vector2(r/t,s/e),this._canvas.width=r,this._canvas.height=s,this._canvas.offsetParent&&(this._offset=new i.Vector2(this._canvas.offsetLeft,this._canvas.offsetTop))}clear(){this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}drawImage(t,e={x:0,y:0},o=0,n={x:0,y:0}){this._context.save(),this._context.scale(this._scale.x,this._scale.y),this._context.translate(e.x,e.y),this._context.rotate(o),this._context.drawImage(t,0,0,t.width,t.height,-n.x,-n.y,t.width,t.height),this._context.restore()}drawText(t,e,o,n,i="left"){this._context.save(),this._context.scale(this._scale.x,this._scale.y),this._context.fillStyle=o,this._context.font=e,this._context.textAlign=i,this._context.fillText(t,n.x,n.y),this._context.restore()}changeCursor(t){this._canvas.style.cursor=t}}(s,r),window.addEventListener("resize",e.Canvas2D.resizeCanvas.bind(e.Canvas2D))},9325:(t,e,o)=>{var n=o(4840),i="object"==typeof self&&self&&self.Object===Object&&self,s=n||i||Function("return this")();t.exports=s},9340:(t,e,o)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MenuLabel=void 0;const n=o(9250);e.MenuLabel=class{constructor(t,e,o,n,i){this._text=t,this._position=e,this._font=o,this._color=n,this._alignment=i}draw(){n.Canvas2D.drawText(this._text,this._font,this._color,this._position,this._alignment)}}},9344:(t,e,o)=>{var n=o(3805),i=Object.create,s=function(){function t(){}return function(e){if(!n(e))return{};if(i)return i(e);t.prototype=e;var o=new t;return t.prototype=void 0,o}}();t.exports=s},9350:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},9653:(t,e,o)=>{var n=o(7828);t.exports=function(t){var e=new t.constructor(t.byteLength);return new n(e).set(new n(t)),e}},9770:t=>{t.exports=function(t,e){for(var o=-1,n=null==t?0:t.length,i=0,s=[];++o<n;){var r=t[o];e(r,o,t)&&(s[i++]=r)}return s}},9817:t=>{t.exports=function(t){return this.__data__.has(t)}},9819:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.State=void 0,e.State=class{constructor(){this.pocketedBalls=[],this.ballInHand=!1,this.isValid=!1}}},9935:t=>{t.exports=function(){return!1}},9999:(t,e,o)=>{var n=o(7217),i=o(3729),s=o(6547),r=o(4733),a=o(3838),l=o(3290),u=o(3007),c=o(2271),h=o(8948),p=o(2),d=o(3349),_=o(5861),v=o(6189),y=o(7199),m=o(5529),f=o(6449),g=o(3656),b=o(7730),x=o(3805),w=o(8440),P=o(5950),B=o(7241),C="[object Arguments]",S="[object Function]",M="[object Object]",O={};O[C]=O["[object Array]"]=O["[object ArrayBuffer]"]=O["[object DataView]"]=O["[object Boolean]"]=O["[object Date]"]=O["[object Float32Array]"]=O["[object Float64Array]"]=O["[object Int8Array]"]=O["[object Int16Array]"]=O["[object Int32Array]"]=O["[object Map]"]=O["[object Number]"]=O[M]=O["[object RegExp]"]=O["[object Set]"]=O["[object String]"]=O["[object Symbol]"]=O["[object Uint8Array]"]=O["[object Uint8ClampedArray]"]=O["[object Uint16Array]"]=O["[object Uint32Array]"]=!0,O["[object Error]"]=O[S]=O["[object WeakMap]"]=!1,t.exports=function t(e,o,j,T,A,G){var I,k=1&o,V=2&o,H=4&o;if(j&&(I=A?j(e,T,A,G):j(e)),void 0!==I)return I;if(!x(e))return e;var D=f(e);if(D){if(I=v(e),!k)return u(e,I)}else{var W=_(e),L=W==S||"[object GeneratorFunction]"==W;if(g(e))return l(e,k);if(W==M||W==C||L&&!A){if(I=V||L?{}:m(e),!k)return V?h(e,a(I,e)):c(e,r(I,e))}else{if(!O[W])return A?e:{};I=y(e,W,k)}}G||(G=new n);var F=G.get(e);if(F)return F;G.set(e,I),w(e)?e.forEach((function(n){I.add(t(n,o,j,n,e,G))})):b(e)&&e.forEach((function(n,i){I.set(i,t(n,o,j,i,e,G))}));var E=D?void 0:(H?V?d:p:V?B:P)(e);return i(E||e,(function(n,i){E&&(n=e[i=n]),s(I,i,t(n,o,j,i,e,G))})),I}}},e={};function o(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={id:n,loaded:!1,exports:{}};return t[n](s,s.exports,o),s.loaded=!0,s.exports}o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";const t=o(5077),e=o(799),n=o(636),i=o(7687),s=o(1998),r=o(1123),a=o(9210),l=o(3799),u=o(8315),c=o(3959),h=o(4823),p=o(6490),d=o(9250),_=o(5908),v=a.GameConfig.sprites,y=a.GameConfig.input;(new class{constructor(){this._previousMenus=[],this._menu=new u.Menu}initMenuActions(){this._menuActionsMap=new Map,this._menuActionsMap.set(l.MenuActionType.PVP,new r.PVPCommand(this)),this._menuActionsMap.set(l.MenuActionType.PVC,new s.PVCCommand(this)),this._menuActionsMap.set(l.MenuActionType.ToggleSound,new i.ToggleSoundCommand),this._menuActionsMap.set(l.MenuActionType.GoToSubMenu,new n.GoToSubMenuCommand(this)),this._menuActionsMap.set(l.MenuActionType.GoToPreviousMenu,new e.GoToPreviousMenuCommand(this))}initMainMenu(){this._menu.init(this._menuActionsMap,a.GameConfig.mainMenu)}displayLoadingScreen(){return new Promise((t=>{this._isLoading=!0,d.Canvas2D.clear(),d.Canvas2D.drawImage(c.Assets.getSprite(v.paths.controls),a.GameConfig.loadingScreenImagePosition),setTimeout((()=>{this._isLoading=!1,t()}),a.GameConfig.loadingScreenTimeout)}))}handleInput(){this._inGame&&p.Keyboard.isPressed(y.toggleMenuKey)&&(this._menu.active?this._menu.active=!1:(this.initMainMenu(),this._menu.active=!0))}update(){this._isLoading||(this.handleInput(),this._menu.active?this._menu.update():this._poolGame.update(),p.Keyboard.reset(),_.Mouse.reset())}draw(){this._isLoading||t.AI.finishedSession&&(d.Canvas2D.clear(),this._menu.active?this._menu.draw():this._poolGame.draw())}gameLoop(){this.update(),this.draw(),window.requestAnimationFrame((()=>{this.gameLoop()}))}async init(){await c.Assets.loadGameAssets(),this.initMenuActions(),this.initMainMenu(),this._menu.active=!0,this._poolGame=new h.GameWorld,this.gameLoop()}goToSubMenu(t){setTimeout((()=>{this._menu&&(this._menu.active=!1,this._previousMenus.push(this._menu)),this._menu=this._menu.getSubMenu(t),this._menu.active=!0}),a.GameConfig.timeoutToLoadSubMenu)}goToPreviousMenu(){this._previousMenus.length>0&&setTimeout((()=>{this._menu.active=!1,this._menu=this._previousMenus.pop(),this._menu.active=!0}),a.GameConfig.timeoutToLoadSubMenu)}start(){this.displayLoadingScreen().then((()=>{this._menu.active=!1,this._inGame=!0,this._poolGame=new h.GameWorld,this._poolGame.initMatch()}))}}).init()})()})();